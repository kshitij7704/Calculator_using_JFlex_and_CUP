# Calculator using JFlex and CUP

## Overview

This project implements a simple arithmetic calculator using JFlex and CUP to generate a lexer and parser for evaluating mathematical expressions. The calculator supports basic arithmetic operations (addition, subtraction, multiplication, and division) and parentheses for grouping expressions. It provides an interactive command-line interface where users can input expressions and receive results until they choose to exit.

## Functionalities

The calculator offers the following features:

- **Basic Arithmetic Operations**: 
  - Addition (`+`)
  - Subtraction (`-`)
  - Multiplication (`*`)
  - Division (`/`)
- **Operator Precedence**: 
  - Multiplication and division have higher precedence than addition and subtraction.
  - Left associativity is enforced for all operators.
- **Parentheses**: Supports nested parentheses to override default precedence rules.
- **Interactive Mode**: Continuously prompts for user input until the user types `exit`.
- **Error Handling**: Displays meaningful error messages for invalid inputs (e.g., division by zero, illegal characters).

## Project Structure

```
calculator/
├── src/
│   └── com/
│       └── example/
│           ├── Lexer.jflex    # JFlex specification for the lexer
│           ├── Parser.cup     # CUP specification for the parser
│           ├── Lexer.java     # Generated by JFlex
│           ├── Parser.java    # Generated by CUP
│           ├── sym.java       # Generated by CUP (symbol table)
│           └── Main.java      # Main class to run the calculator
└── lib/
    ├── jflex-full-1.9.1.jar   # JFlex JAR file
    └── java-cup-11b.jar       # CUP JAR file (includes runtime)
```

## Setup and Installation

### Prerequisites

- **Java**: JDK 8 or later (verify with `java -version` and `javac -version`).
- **JFlex**: Download `jflex-full-1.9.1.jar` from [http://jflex.de/](http://jflex.de/).
- **CUP**: Download `java-cup-11b.jar` from [http://www2.cs.tum.edu/projects/cup/](http://www2.cs.tum.edu/projects/cup/).

### Build Instructions

1. **Generate the Parser and Symbol Table**
   ```bash
   java -jar lib/java-cup-11b.jar -destdir src/com/example -parser Parser -symbols sym -package com.example src/com/example/Parser.cup
   ```
   - Outputs `Parser.java` and `sym.java` in `src/com/example/`.

2. **Generate the Lexer**
   ```bash
   java -jar lib/jflex-full-1.9.1.jar src/com/example/Lexer.jflex
   ```
   - Outputs `Lexer.java` in `src/com/example/`.

3. **Compile the Java Files**
   ```bash
   javac -cp "lib/java-cup-11b.jar;src" src/com/example/*.java
   ```
   - **Note**: On Unix/Linux/Mac, replace `;` with `:` (e.g., `lib/java-cup-11b.jar:src`).

4. **Run the Calculator**
   ```bash
   java -cp "lib/java-cup-11b.jar;src" com.example.Main
   ```
   - **Note**: On Unix/Linux/Mac, replace `;` with `:` (e.g., `lib/java-cup-11b.jar:src`).

## Usage

- Launch the program using the run command above.
- Enter an arithmetic expression (e.g., `3 + 5 * 2`) and press Enter.
- The program displays the result or an error message.
- Type `exit` to quit.

### Sample Inputs and Outputs

```plaintext
Enter expression (or 'exit' to quit): 2 + 3 * 4
Result: 14

Enter expression (or 'exit' to quit): (2 + 3) * 4
Result: 20

Enter expression (or 'exit' to quit): 10 / 2 - 1
Result: 4

Enter expression (or 'exit' to quit): ((2 + 3) * (4 - 1))
Result: 15

Enter expression (or 'exit' to quit): 5 / 0
Error: / by zero

Enter expression (or 'exit' to quit): 2 + a
Error: Illegal character: a

Enter expression (or 'exit' to quit): exit
```

## Code Details

### Main Class (`Main.java`)

- **Purpose**: Handles user interaction and orchestrates the lexer and parser.
- **Key Features**:
  - Uses a `Scanner` to read input from the console.
  - Creates a `Lexer` and `Parser` for each expression.
  - Catches exceptions to display errors.
  - Loops until the user types `exit`.

### Parser (`Parser.cup`)

- **Grammar Rules**:
  - `expression`: Handles addition (`+`) and subtraction (`-`).
  - `term`: Handles multiplication (`*`) and division (`/`).
  - `factor`: Handles numbers and parenthesized expressions.
- **Precedence**: 
  - `TIMES` and `DIVIDE` have higher precedence than `PLUS` and `MINUS`.
  - All operators are left-associative.

### Lexer (`Lexer.jflex`)

- **Note**: Not provided in the query, but assumed to tokenize numbers, operators (`+`, `-`, `*`, `/`), and parentheses (`(`, `)`), while ignoring whitespace and flagging invalid characters.
